(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-33fa681c"],{1995:function(e,t,s){},"25f0":function(e,t,s){"use strict";var a=s("6eeb"),r=s("825a"),i=s("d039"),n=s("ad6d"),o="toString",l=RegExp.prototype,c=l[o],d=i((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),u=c.name!=o;(d||u)&&a(RegExp.prototype,o,(function(){var e=r(this),t=String(e.source),s=e.flags,a=String(void 0===s&&e instanceof RegExp&&!("flags"in l)?n.call(e):s);return"/"+t+"/"+a}),{unsafe:!0})},"70d8":function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"h",(function(){return i})),s.d(t,"d",(function(){return n})),s.d(t,"i",(function(){return o})),s.d(t,"b",(function(){return l})),s.d(t,"g",(function(){return c})),s.d(t,"j",(function(){return d})),s.d(t,"e",(function(){return u})),s.d(t,"f",(function(){return m})),s.d(t,"c",(function(){return g}));s("a01d");var a=s("b775");function r(e){return Object(a["a"])({url:"/8088/userManage/addUser",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/8088/userManage/getUserListPage",method:"get",params:e})}function n(e){return Object(a["a"])({url:"/8088/userManage/editUser",method:"put",data:e})}function o(e){return Object(a["a"])({url:"/8088/userManage/removeUser",method:"delete",params:e})}function l(e){return Object(a["a"])({url:"/8088/userManage/batchRemoveUser",method:"delete",params:e})}function c(e){return Object(a["a"])({url:"/8088/userManage/getTeamPerm",method:"get",params:e})}function d(e){return Object(a["a"])({url:"/8088/userManage/updatePassword",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/8088/userManage/getAll",method:"get",params:e})}function m(e){return Object(a["a"])({url:"/8088/userManage/authority",method:"get",params:e})}function g(e){return Object(a["a"])({url:"/8088/userManage/changePassword",method:"post",data:e})}},"9ca2":function(e,t,s){"use strict";s("1995")},a3ce:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[e._m(0),s("div",{staticClass:"content"},[s("div",{staticClass:"left"},[s("div",{staticClass:"button"},[s("el-row",[s("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(t){return e.handleAdd()}}},[e._v("新增团队")]),s("el-button",{attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(t){return e.handleDelete()}}},[e._v("删除")])],1)],1),e._m(1),s("div",{staticClass:"teamdata"},[s("div",{staticClass:"list"},e._l(e.teamsList,(function(t){return s("div",{key:t.id,staticClass:"teamList",on:{click:function(s){return e.openDetails(t)}}},[s("el-card",e._b({staticClass:"box-card",style:{border:"1px solid "+e.markcolor(t.id)}},"el-card",t,!1),[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",[e._v(e._s(t.name))])]),s("div",[s("i",{staticClass:"el-icon-user"},[e._v(" "+e._s(t.nums)+" ")]),e._v(" "),s("span",{staticStyle:{float:"right"}},[s("i",{staticClass:"el-icon-date"},[e._v(" "+e._s(e._f("formatDate")(t.create_time)))])])])])],1)})),0)])]),s("div",{staticClass:"right"},[e._m(2),s("div",{staticClass:"teamMssage"},[s("table",{staticStyle:{"border-collapse":"separate","border-spacing":"10px"}},[s("tr",{staticClass:"teamTr"},[s("td",{attrs:{width:"350"}},[s("span",{staticStyle:{float:"left"}},[e._v("团队名称：")]),s("span",[e._v(e._s(e.selectTeam.name)+" ")])]),s("td",{attrs:{width:"250"}},[s("span",{staticStyle:{float:"left"}},[e._v("团队成员：")]),s("span",[e._v(" "+e._s(e.userTotal)+" ")])])]),s("tr",[s("td",{attrs:{width:"250"}},[s("span",{staticStyle:{float:"left"}},[e._v("创建时间：")]),e._v(" "),s("span",[e._v(e._s(e._f("formatDate")(e.selectTeam.create_time)))])]),s("td",{attrs:{width:"350"}},[s("span",{staticStyle:{float:"left"}},[e._v("团队信息：")]),e.flag?s("div",[s("div",{staticStyle:{float:"left"}},[e._v(e._s(e.selectTeam.descr))])]):s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectTeam.descr,expression:"selectTeam.descr"}],staticClass:"teamDescr",staticStyle:{float:"left"},attrs:{type:"text"},domProps:{value:e.selectTeam.descr},on:{input:function(t){t.target.composing||e.$set(e.selectTeam,"descr",t.target.value)}}})]),s("div",[s("el-button",{staticClass:"edit",attrs:{size:"mini",icon:"el-icon-edit"},on:{click:e.editClick}})],1)])])])]),s("el-row",[s("div",{staticClass:"teamuserButton"},[s("el-button",{staticStyle:{float:"left"},attrs:{type:"primary",size:"mini",plain:"",disabled:"团队管理员"!==e.idLabel},on:{click:e.handleAddUser}},[e._v("新增成员")]),s("el-button",{staticStyle:{float:"left"},attrs:{type:"danger",size:"mini",plain:"",disabled:0===e.seles.length||"团队管理员"!==e.idLabel},on:{click:e.batchRemove}},[e._v("批量删除")])],1)]),s("div",{staticClass:"teamUserMessage"},[s("el-table",{staticClass:"showuser",staticStyle:{width:"100%","font-size":"10px"},attrs:{data:e.rolesList,border:"","cell-style":{padding:"8px"}},on:{"selection-change":e.selChange,"sort-change":e.sortChange}},[s("el-table-column",{attrs:{type:"selection",align:"center",width:"60",disabled:"团队管理员"!==e.idLabel}}),s("el-table-column",{attrs:{prop:"name",align:"center",label:"用户名字","show-overflow-tooltip":"",width:"130",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.name)+" ")]}}])}),s("el-table-column",{attrs:{align:"center",prop:"label_role",label:"角色","show-overflow-tooltip":"",width:"130",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.label_role)+" ")]}}])}),s("el-table-column",{attrs:{align:"center",prop:"email",label:"邮箱","show-overflow-tooltip":"","min-width":"140",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.email)+" ")]}}])}),s("el-table-column",{attrs:{align:"center",prop:"descr",label:"描述","show-overflow-tooltip":"","min-width":"150",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.descr)+" ")]}}])}),s("el-table-column",{attrs:{align:"center",prop:"create_time",label:"创建时间","show-overflow-tooltip":"",width:"120",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("formatDate")(t.row.create_time))+" ")]}}])}),s("el-table-column",{attrs:{align:"left",label:"操作","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{staticClass:"me",attrs:{size:"mini",disabled:"团队管理员"!==e.idLabel},on:{click:function(s){return e.handleEditUser(t.$index,t.row)}}},[e._v("编辑")]),s("el-button",{staticClass:"me",attrs:{size:"mini",disabled:"团队管理员"!==e.idLabel},on:{click:function(s){return e.handleDeleteUser(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),s("el-col",{staticClass:"tool-bar",attrs:{span:24}},[s("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.page_size,"page-sizes":[2,3,4,10,12,15],total:e.userTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)]),s("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[s("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"80px",rules:e.editFormRules}},[s("el-form-item",{attrs:{label:"名字",prop:"name"}},[s("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),s("el-form-item",{attrs:{label:"描述"}},[s("el-input",{attrs:{type:"textarea"},model:{value:e.editForm.descr,callback:function(t){e.$set(e.editForm,"descr",t)},expression:"editForm.descr"}})],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"danger"},nativeOn:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),"create"==e.dialogStatus?s("el-button",{attrs:{type:"primary"},on:{click:e.createTeam}},[e._v("添加")]):s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!1,e.updateData}}},[e._v("修改")])],1)],1),s("el-dialog",{attrs:{title:e.textMap[e.dialogStatusUser],visible:e.dialogFormVisibleUser,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisibleUser=t}}},[s("el-form",{ref:"editForm",attrs:{model:e.editFormUser,"label-width":"80px",rules:e.editFormRulesUser}},[s("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[s("el-input",{attrs:{placeholder:"请输入邮箱",disabled:"update"===e.dialogStatusUser},model:{value:e.editFormUser.email,callback:function(t){e.$set(e.editFormUser,"email",t)},expression:"editFormUser.email"}})],1),s("el-form-item",{attrs:{label:"角色",prop:"label_role"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editFormUser.label_role,callback:function(t){e.$set(e.editFormUser,"label_role",t)},expression:"editFormUser.label_role"}},e._l(e.statusOptions,(function(e){return s("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),s("el-form-item",{attrs:{label:"描述"}},[s("el-input",{attrs:{type:"textarea"},model:{value:e.editFormUser.descr,callback:function(t){e.$set(e.editFormUser,"descr",t)},expression:"editFormUser.descr"}})],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"danger"},nativeOn:{click:function(t){e.dialogFormVisibleUser=!1}}},[e._v("取消")]),"create"==e.dialogStatusUser?s("el-button",{attrs:{type:"primary"},on:{click:e.createUser}},[e._v("添加")]):s("el-button",{attrs:{type:"primary"},on:{click:e.updateDataUser}},[e._v("修改")])],1)],1)],1)},r=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"header"},[s("span",{staticClass:"title"},[e._v(" 标注团队 ")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"teamNum"},[s("span",[e._v("团队列表")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"teamTitle"},[s("span",[e._v(" 团队详情 ")])])}],i=s("5530"),n=(s("d3b7"),s("25f0"),s("b0c0"),s("d81d"),s("2f62")),o=s("ac98"),l=s("b775");function c(e){return Object(l["a"])({url:"/8088/teamUser/getTeamUserPage",method:"get",params:e})}function d(e){return Object(l["a"])({url:"/8088/teamUser/addUser",method:"post",params:e})}function u(e){return Object(l["a"])({url:"/8088/teamUser/editUser",method:"put",params:e})}function m(e){return Object(l["a"])({url:"/8088/teamUser/delUser",method:"delete",params:e})}function g(e){return Object(l["a"])({url:"/8088/teamUser/batchDelUser",method:"delete",params:e})}var f=s("70d8"),h=s("4360"),p={filters:{formatDate:function(e){if(!e)return"";var t=e[0],s=e[1],a=e[2],r=e[3],i=e[4],n=e[5];return r.toString().length<2&&(r="0"+r),null==i?i="00":i.toString().length<2&&(i="0"+i),null==n?(n="00",console.log(r.length)):n.toString().length<2&&(n="0"+n)," "+t+"-"+s+"-"+a+" "+r+":"+i+":"+n}},data:function(){var e=function(e,t,s){var a=/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/;if(a.test(t))return s();s(new Error("请输入合法的邮箱"))};return{isRole:h["a"].getters.role,selectTeamId:"",flag:"true",nowDateTime:"",total:0,page:1,page_size:10,seles:[],selectTeam:[],teamsList:[],rolesList:[],userTotal:0,statusOptions:["标注员","团队管理员","审核员","验收员"],idLabel:"",dialogStatus:"",dialogStatusUser:"",dialogFormVisible:!1,dialogFormVisibleUser:!1,options:[],editForm:{email:"",descr:""},colorder:"",ordering:"",editFormUser:{email:"",label_role:"",descr:""},editFormRules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}]},editFormRulesUser:{email:[{required:!0,message:"邮箱不能为空",trigger:"blur"},{validator:e,trigger:"blur"}]},textMap:{update:"修改",create:"新增"},addFormVisible:!1,addFormRules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}]}}},computed:Object(i["a"])({},Object(n["b"])(["name","userid"])),created:function(){1==h["a"].getters.register&&this.$router.push("/dashboard"),this.getTeamsList()},methods:{sortChange:function(e){console.log("排序",e.prop,e.order),this.colorder=e.prop,null!=e.order&&(this.ordering=e.order),this.getUsers()},markcolor:function(e){return e===this.selectTeamId?"blue":"white"},edit:function(){this.flag=!1},editClick:function(){var e=this;if(this.flag=!this.flag,this.flag){var t={id:this.selectTeam.id,descr:this.selectTeam.descr};Object(o["c"])(t).then((function(t){e.$message({message:t.message,type:"success"}),e.getTeamsList()}))}},mouseOver:function(){"admin"!==this.isRole||"团队管理员"!==this.idLabel?this.flag=!0:this.flag=!1},mouseLeave:function(){var e=this;this.flag=!0;var t={};t.descr=this.selectTeam.descr,t.name=this.selectTeam.name,t.id=this.selectTeam.id,console.log(t),this.$confirm("确认提交吗？","提示",{}).then((function(){Object(o["c"])(t).then((function(t){e.$message({message:"提交成功",type:"success"}),e.getTeamsList()}))}))},getTeamsList:function(){var e=this,t={name:h["a"].getters.name,id:h["a"].getters.userid};Object(o["f"])(t).then((function(t){e.teamsList=t.data.items}))},handleSizeChange:function(e){this.page_size=e,this.getUsers()},handleCurrentChange:function(e){this.page=e,this.getUsers()},getUsers:function(){var e=this,t={};t.id=this.selectTeam.id,t.name=this.selectTeam.name,t.page=this.page,t.pagesize=this.page_size,t.colorder=this.colorder,t.ordering=this.ordering,console.log(t),c(t).then((function(t){e.rolesList=t.data.items,e.userTotal=t.data.total}))},openDetails:function(e){var t=this;this.selectTeamId=e.id,this.flag=!0,this.idLabel="",this.selectTeam=Object.assign({},e),console.log(this.selectTeam);var s={team_id:this.selectTeamId,user_id:h["a"].getters.userid};console.log(s),Object(f["g"])(s).then((function(e){t.idLabel=e.data.items})),console.log(this.idLabel),this.getUsers()},handleAdd:function(){this.dialogStatus="create",this.dialogFormVisible=!0,this.editForm={name:"",descr:""}},handleEdit:function(e,t){this.dialogStatus="update",this.dialogFormVisible=!0,this.editForm=Object.assign({},t)},handleDelete:function(){var e=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then((function(){var t={id:e.selectTeamId,name:h["a"].getters.name};console.log(t),Object(o["b"])(t).then((function(t){e.$message({message:t.message,type:"success"}),e.getTeamsList()})).catch((function(t){e.$message({message:t.message,type:"success"})}))}))},handleDeleteUser:function(e,t){var s=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then((function(){var e={id:t.id};e.teamid=s.selectTeam.id,e.name=t.name,console.log(e),m(e).then((function(e){s.$message({message:e.message,type:"success"}),s.getUsers(),s.getTeamsList()}))})),console.log(e,t)},handleAddUser:function(){this.dialogStatusUser="create",this.dialogFormVisibleUser=!0,this.editFormUser={email:"",label_role:"",descr:""},this.getAllUserList()},getAllUserList:function(){var e=this;Object(f["e"])().then((function(t){e.options=t.data.items}))},handleEditUser:function(e,t){this.dialogStatusUser="update",this.dialogFormVisibleUser=!0,console.log(t),this.editFormUser=Object.assign({},t),console.log(this.editFormUser)},updateDataUser:function(){var e=this;this.$refs.editForm.validate((function(t){t&&e.$confirm("确认提交吗？","提示",{}).then((function(){var t=Object.assign({},e.editFormUser);console.log(t);var s={id:t.id,name:t.name,descr:t.descr,teamid:e.selectTeam.id,character:t.label_role};console.log(s),u(s).then((function(t){e.$message({message:t.message,type:"success"}),e.dialogFormVisibleUser=!1,e.getUsers()}))})).catch((function(e){console.log(e)}))}))},createUser:function(){var e=this;this.$refs.editForm.validate((function(t){t&&e.$confirm("确认提交吗？","提示",{}).then((function(){console.log(e.editFormUser);var t={email:e.editFormUser.email,descr:e.editFormUser.descr,character:e.editFormUser.label_role,team:e.selectTeamId};console.log(0xc0bf3edba31790000),console.log(t),d(t).then((function(t){e.$message({message:"添加成功",type:"success"}),e.getUsers(),e.getTeamsList()})),e.dialogFormVisibleUser=!1})).catch((function(e){console.log(e)}))}))},createTeam:function(){var e=this;this.$refs.editForm.validate((function(t){t&&e.$confirm("确认提交吗？","提示",{}).then((function(){var t=Object.assign({},e.editForm);t.createBy=h["a"].getters.name,t.userid=h["a"].getters.userid,console.log(t),Object(o["a"])(t).then((function(t){e.$message({message:"提交成功",type:"success"}),e.dialogFormVisible=!1,e.getTeamsList()}))})).catch((function(e){console.log(e)}))}))},selChange:function(e){this.seles=e},batchRemove:function(){var e=this,t=this.seles.map((function(e){return e.id})).toString();console.log(t),this.$confirm("确认删除选中记录吗？","提示",{type:"warning"}).then((function(){var s={ids:t};s.teamid=e.selectTeam.id,console.log(s),g(s).then((function(t){e.$message({message:"删除成功",type:"success"}),e.getUsers(),e.getTeamsList()}))})).catch((function(){}))}}},b=p,v=(s("9ca2"),s("2877")),_=Object(v["a"])(b,a,r,!1,null,"2c906e50",null);t["default"]=_.exports},ac98:function(e,t,s){"use strict";s.d(t,"f",(function(){return r})),s.d(t,"b",(function(){return i})),s.d(t,"a",(function(){return n})),s.d(t,"c",(function(){return o})),s.d(t,"d",(function(){return l})),s.d(t,"e",(function(){return c}));var a=s("b775");function r(e){return Object(a["a"])({url:"/8088/team/getTeams",method:"get",params:e})}function i(e){return Object(a["a"])({url:"/8088/team/delTeams",method:"delete",params:e})}function n(e){return Object(a["a"])({url:"/8088/team/addTeams",method:"post",params:e})}function o(e){return Object(a["a"])({url:"/8088/team/editTeams",method:"put",params:e})}function l(e){return Object(a["a"])({url:"/8085/team/getAll",method:"get",params:e})}function c(e){return Object(a["a"])({url:"/8085/team/getSelect",method:"get",params:e})}}}]);