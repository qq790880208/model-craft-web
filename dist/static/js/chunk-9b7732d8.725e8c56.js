(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9b7732d8"],{"5a0d":function(t,a,e){},"5f89":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"training-jobs"},[e("el-row",[e("el-col",{attrs:{span:5}},[e("el-button",{attrs:{size:"medium"},on:{click:t.createbtn}},[t._v(" 创建训练任务 ")])],1),e("el-col",{attrs:{span:3,offset:9}},[e("el-select",{attrs:{placeholder:"请选择"},on:{change:t.searchStatusTask},model:{value:t.selectedstatus,callback:function(a){t.selectedstatus=a},expression:"selectedstatus"}},[e("el-option",{attrs:{label:"全部状态",value:"5"}}),e("el-option",{attrs:{label:"未开始",value:"0"}}),e("el-option",{attrs:{label:"运行中",value:"1"}}),e("el-option",{attrs:{label:"结束成功",value:"2"}}),e("el-option",{attrs:{label:"结束失败",value:"3"}})],1)],1),e("el-col",{attrs:{span:3}},[e("el-input",{staticStyle:{width:"75dx"},attrs:{placeholder:"请输入名称查询",clearable:!0},on:{change:t.resetSearch},model:{value:t.queryInfo.query,callback:function(a){t.$set(t.queryInfo,"query",a)},expression:"queryInfo.query"}})],1),e("el-col",{staticStyle:{"margin-left":"5px"},attrs:{span:1}},[e("el-button",{on:{click:t.searchTask}},[t._v("搜索")])],1),e("el-col",{staticStyle:{"margin-left":"5px"},attrs:{span:1}},[e("el-button",{on:{click:t.resetSearch}},[t._v("重置")])],1)],1),e("el-table",{attrs:{data:t.tableData,"header-cell-style":{background:"#eef1f6",color:"#606266"}}},[e("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e("el-table-column",{attrs:{label:"名称",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticStyle:{color:"#5284DB"}},[t._v(t._s(a.row.name))])]}}])}),e("el-table-column",{attrs:{label:"训练数据集",width:"160"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.dataset_name))])]}}])}),e("el-table-column",{attrs:{label:"算法",width:"160"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(t.algorithmArray[a.row.algo_id]))])]}}])}),e("el-table-column",{attrs:{label:"状态",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(t.statusoptions[a.row.status]))]),e("span")]}}])}),e("el-table-column",{attrs:{label:"运行时长",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[0!=a.row.cost_time?e("span",[t._v(t._s(a.row.cost_time)+" 秒")]):t._e(),0==a.row.cost_time?e("span",[t._v("-")]):t._e()]}}])}),e("el-table-column",{attrs:{label:"创建时间",width:"160"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(t.formatDate(a.row.create_time)))])]}}])}),e("el-table-column",{attrs:{label:"描述",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.descr))])]}}])}),e("el-table-column",{attrs:{label:"操作",width:"400"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.handleStart(a.$index,a.row)}}},[t._v("开始")]),e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.handleStop(a.$index,a.row)}}},[t._v("终止")]),e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.handleShow(a.$index,a.row)}}},[t._v("可视化")]),0!=a.row.status?e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.handleShowlog(a.$index,a.row)}}},[t._v("日志")]):t._e(),0==a.row.status?e("el-button",{attrs:{size:"mini",disabled:""},on:{click:function(e){return t.handleShowlog(a.$index,a)}}},[t._v("日志")]):t._e(),e("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.handleDelete(a.$index,a.row)}}},[t._v("删除")])]}}])})],1),e("el-pagination",{attrs:{"current-page":t.queryInfo.pagenum,"page-sizes":[2,3,4,10,12,15],"page-size":t.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.totalData},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),e("el-dialog",{attrs:{visible:t.picVisible,title:"当前训练","show-close":!1},on:{"update:visible":function(a){t.picVisible=a}}},[e("div",[e("visualt",{attrs:{dData:t.drawData.first,id:"2"}}),e("visualf",{attrs:{Data:t.drawData.second,id:"1"}})],1)]),e("el-dialog",{attrs:{title:"训练日志",visible:t.logdialogVisible,"show-close":!1},on:{close:t.closeShowLog,"update:visible":function(a){t.logdialogVisible=a}}},[e("el-input",{attrs:{type:"textarea",id:"textarea_id",disabled:!0,autosize:{minRows:20,maxRows:20},placeholder:"获取中......"},model:{value:t.logText,callback:function(a){t.logText=a},expression:"logText"}}),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(a){return t.closeShowLog()}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.closeShowLog()}}},[t._v("确 定")])],1)],1),e("el-dialog",{attrs:{title:"参数配置",visible:t.parameterdialogVisible,"close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(a){t.parameterdialogVisible=a}}},[e("span",{staticStyle:{display:"block"}},[t._v("请选择参数")]),e("span",{staticStyle:{"margin-left":"30px"}},t._l(t.paraNameList,(function(a,i){return e("el-button",{key:i,style:{background:t.findInList(a)?"rgba(0,100,200,0.5)":"white"},on:{click:function(e){return t.changePara(a)}}},[t._v(t._s(a)+" ")])})),1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:t.closeparadialog}},[t._v("完 成")])],1)]),e("el-dialog",{attrs:{title:"任务信息",visible:t.dialogFormVisible,"show-close":!1,"close-on-click-modal":!1},on:{"update:visible":function(a){t.dialogFormVisible=a}}},[t.dialogFormVisible?e("el-form",{ref:"taskForm",staticClass:"demo-taskForm",attrs:{model:t.taskForm,rules:t.rules,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"任务名称",prop:"name"}},[e("el-input",{model:{value:t.taskForm.name,callback:function(a){t.$set(t.taskForm,"name",a)},expression:"taskForm.name"}})],1),e("el-form-item",{attrs:{label:"任务描述"}},[e("el-input",{attrs:{type:"textarea"},model:{value:t.taskForm.description,callback:function(a){t.$set(t.taskForm,"description",a)},expression:"taskForm.description"}})],1),e("el-form-item",{attrs:{label:"数据集选择",prop:"dataset_index"}},[e("el-select",{attrs:{placeholder:"请选择"},on:{change:function(a){return t.pathChange(t.taskForm.dataset_index)}},model:{value:t.taskForm.dataset_index,callback:function(a){t.$set(t.taskForm,"dataset_index",a)},expression:"taskForm.dataset_index"}},[e("div",{staticClass:"scrollbar",staticStyle:{height:"150px"}},[e("el-scrollbar",{staticStyle:{height:"100%"}},t._l(t.initialPara.inputData.name,(function(t,a){return e("el-option",{key:a,attrs:{label:t,value:a}})})),1)],1)])],1),e("el-form-item",{attrs:{label:"训练算法",prop:"data"}},[e("el-input",{attrs:{disabled:!0,placeholder:"none"},model:{value:t.algorithmArray[this.useAlgorithm],callback:function(a){t.$set(t.algorithmArray,this.useAlgorithm,a)},expression:"algorithmArray[this.useAlgorithm]"}})],1),e("el-form-item",{attrs:{label:"数据集图片位置",prop:"data"}},[e("el-input",{attrs:{disabled:!0},model:{value:t.imageOssPath,callback:function(a){t.imageOssPath=a},expression:"imageOssPath"}})],1),e("el-form-item",{attrs:{label:"数据集标注结果位置",prop:"data"}},[e("el-input",{attrs:{disabled:!0},model:{value:t.textOssPath,callback:function(a){t.textOssPath=a},expression:"textOssPath"}})],1),e("el-form-item",{attrs:{label:"模型生成位置",prop:"data"}},[e("el-input",{attrs:{disabled:!0},model:{value:t.modelOssPath,callback:function(a){t.modelOssPath=a},expression:"modelOssPath"}})],1),e("el-form-item",{attrs:{label:"参数选择"}},[e("el-form",[e("el-form-item",[e("div",{staticClass:"scrollbar",staticStyle:{height:"200px"}},[e("el-scrollbar",{staticStyle:{height:"100%"}},[t._l(t.showParaNameList,(function(a,i){return e("el-form-item",{key:i},["transferLearning"!=a?e("div",[e("p",{staticStyle:{width:"25%",display:"inline-block"},attrs:{sty:"",autocomplete:"off"}},[t._v(t._s(a))]),e("b",{staticStyle:{"margin-left":"15px"}},[t._v("=")]),e("el-input",{staticStyle:{width:"25%","margin-left":"15px"},attrs:{autocomplete:"off"},model:{value:t.showParaValueList[i],callback:function(a){t.$set(t.showParaValueList,i,a)},expression:"showParaValueList[index]"}}),e("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){return t.deleteOneoption(i)}}})],1):t._e(),"transferLearning"==a?e("div",[e("p",{staticStyle:{width:"25%",display:"inline-block"},attrs:{sty:"",autocomplete:"off"}},[t._v(t._s(a))]),e("b",{staticStyle:{"margin-left":"15px"}},[t._v("=")]),e("el-select",{staticStyle:{width:"25%","margin-left":"15px"},attrs:{placeholder:"请选择"},model:{value:t.transferLearningValue,callback:function(a){t.transferLearningValue=a},expression:"transferLearningValue"}},[e("div",{staticClass:"scrollbar",staticStyle:{height:"150px"}},t._l(t.transferLearningList,(function(t,a){return e("el-option",{key:a,attrs:{label:t,value:t}})})),1)]),e("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){return t.deleteOneoption(i)}}})],1):t._e()])})),t.editbutton?e("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:t.editOneoption}}):t._e()],2)],1)])],1)],1)],1):t._e(),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(a){return t.cancelbtn("taskForm")}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.create("taskForm")}}},[t._v("提交")])],1)],1)],1)},s=[],o=(e("a434"),e("b0c0"),e("fb6a"),e("a4d3"),e("e01a"),e("d3b7"),e("25f0"),e("ac1f"),e("5319"),function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{class:t.className,style:{height:t.height,width:t.width},attrs:{id:t.id}})}),n=[],r=e("313e"),l=e.n(r);e("ed08");e("817d");var c={props:{lineData:{type:Object,default:{}},className:{type:String,default:"chart"},id:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"250px"},autoResize:{type:Boolean,default:!0}},data:function(){return{chart:null}},mounted:function(){this.$nextTick((function(){setTimeout(this.initChart(),200)}))},methods:{initChart:function(){this.chart=l.a.init(document.getElementById(this.id),"macarons"),this.chart.clear(),this.chart.setOption({backgroundColor:"#ffffff",title:{text:this.lineData.title,textStyle:{color:"#000000",fontSize:18}},tooltip:{trigger:"axis"},legend:{top:0,icon:"rect",itemWidth:14,itemHeight:5,itemGap:13,data:this.lineData.epoch,right:"50%",textStyle:{fontSize:12,color:"#000000"}},grid:{top:100,left:"3%",right:"4%",bottom:"2%",containLabel:!0},xAxis:[{type:"category",name:"epoch",nameLocation:"center",boundaryGap:!1,axisLine:{lineStyle:{color:"#008acd"}},data:this.lineData.epoch}],yAxis:[{type:"value",name:"loss",axisTick:{show:!1},axisLine:{lineStyle:{color:"#008acd"}},axisLabel:{margin:10,textStyle:{fontSize:14}},splitLine:{lineStyle:{color:"#eeeeee"}}}],series:this.lineData.series})}},watch:{lineData:{deep:!0,handler:function(t){console.log("折线图监听",t),t&&setTimeout(this.initChart(),100)}}}},h=c,u=e("2877"),d=Object(u["a"])(h,o,n,!1,null,null,null),p=d.exports,m=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{class:t.className,style:{height:t.height,width:t.width},attrs:{id:t.id}})},g=[];e("817d");var f={props:{Data:{type:Object,default:{}},className:{type:String,default:"chart"},id:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"250px"},autoResize:{type:Boolean,default:!0}},data:function(){return{chart:null}},mounted:function(){this.$nextTick((function(){setTimeout(this.initChart(),200)}))},methods:{initChart:function(){this.chart=l.a.init(document.getElementById(this.id),"macarons"),this.chart.clear(),this.chart.setOption({backgroundColor:"#ffffff",tooltip:{trigger:"axis"},grid:{top:100,left:"3%",right:"4%",bottom:"2%",containLabel:!0},xAxis:[{type:"category",name:"epoch",nameLocation:"center",boundaryGap:!1,axisLine:{lineStyle:{color:"#000000"}},data:this.Data.epoch}],yAxis:[{type:"value",name:"loss",axisTick:{show:!1},axisLine:{lineStyle:{color:"#000000"}},axisLabel:{margin:10,textStyle:{fontSize:14}},splitLine:{lineStyle:{color:"#eeeeee"}}}],series:{name:"train-loss",data:this.Data.valAccuaccy,type:"line",color:"\t#F08080"}});var t=this,a=function(){t.chart.resize()};window.addEventListener("resize",a)}},watch:{Data:{deep:!0,handler:function(t){t&&setTimeout(this.initChart(),100)}}}},b=f,y=Object(u["a"])(b,m,g,!1,null,null,null),w=y.exports,_=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{class:t.className,style:{height:t.height,width:t.width},attrs:{id:t.id}})},x=[];e("817d");var v={props:{dData:{type:Object,default:{}},className:{type:String,default:"chart"},id:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"250px"},autoResize:{type:Boolean,default:!0}},data:function(){return{chart:null}},mounted:function(){this.$nextTick((function(){setTimeout(this.initChart(),200)}))},methods:{initChart:function(){this.chart=l.a.init(document.getElementById(this.id),"macarons"),this.chart.clear(),this.chart.setOption({backgroundColor:"#ffffff",tooltip:{trigger:"axis"},legend:{top:0,icon:"rect",itemWidth:14,itemHeight:5,itemGap:13,data:["train-loss","val-loss"],right:"50%",textStyle:{fontSize:12,color:"#000000"}},grid:{top:100,left:"3%",right:"4%",bottom:"2%",containLabel:!0},xAxis:[{type:"category",name:"epoch",nameLocation:"center",boundaryGap:!1,axisLine:{lineStyle:{color:"#000000"}},data:this.dData.epoch}],yAxis:[{type:"value",name:"loss",axisTick:{show:!1},axisLine:{lineStyle:{color:"#000000"}},axisLabel:{margin:10,textStyle:{fontSize:14}},splitLine:{lineStyle:{color:"#eeeeee"}}}],series:[{name:"train-loss",data:this.dData.trainLoss,type:"line",color:"#00FF00"},{name:"val-loss",data:this.dData.valLoss,type:"line",color:"#FFD700"}]});var t=this,a=(t=this,function(){t.chart.resize()});window.addEventListener("resize",a)}},watch:{dData:{deep:!0,handler:function(t){t&&setTimeout(this.initChart(),100)}}}},L=v,k=Object(u["a"])(L,_,x,!1,null,null,null),P=k.exports,S=e("b775");function D(t){return Object(S["a"])({url:"/8084/train/start",method:"post",params:t})}function O(t){return Object(S["a"])({url:"/8084/train/stop",method:"post",params:t})}function V(t){return Object(S["a"])({url:"/8084/train",method:"delete",params:t})}function N(t){return Object(S["a"])({url:"/8084/train/log",method:"post",params:t})}function F(t){return Object(S["a"])({params:t,url:"/8084/train/search",method:"get"})}function z(t){return Object(S["a"])({url:"/8084/newtrain/getVisualData",method:"get",params:t})}function T(t){return Object(S["a"])({url:"/8084/train",method:"post",data:t})}function q(t){return Object(S["a"])({url:"/8085/data/getAcceptData",method:"get",params:t})}var I=e("4360");function C(t){console.log("keydown!!!!!!!!!!!!");var a=t.event||window.event,e=a.keyCode||a.which||a.charCode;13==e&&(console.log("enter!!!!!!!!!!!!!"),searchTask())}var j={components:{visual:p,visualf:w,visualt:P},data:function(){return{all_list_model_para:[["epoch",100],["size",512],["learning_rate",.01]],list_model_para:[["epoch",100],["size",512],["learning_rate",.01]],options:[{value:"Option1",label:"Option1"},{value:"Option2",label:"Option2"},{value:"Option3",label:"Option3"},{value:"Option4",label:"Option4"},{value:"Option5",label:"Option5"}],value:"",imageOssPath:"none",textOssPath:"none",modelOssPath:"none",useAlgorithm:-1,statusoptions:["未开始","运行中","结束成功","结束失败"],selectedstatus:"5",tableData:[],drawData:{first:{epoch:[],trainLoss:[],valLoss:[]},second:{epoch:[],valAccuaccy:[]}},picVisible:!1,logdialogVisible:!1,parameterdialogVisible:!1,editbutton:!1,logText:"",dialogFormVisible:!1,taskForm:{user_id:"",name:"",algorithm:"",data:"",outpath:"",description:"",paras:[],uuid:"",dataset_index:""},rules:{name:[{required:!0,message:"请输入任务名称",trigger:"blur"}],algorithm:[{required:!0,message:"请选择算法",trigger:"change"}],data:[{required:!0,message:"请选择数据",trigger:"change"}],outpath:[{required:!0,message:"请选择输出位置",trigger:"change"}]},algorithmArray:["Yolov3-TensorFlow","DeepLab-TensorFlow","voice","Yolov3-Pytorch"],paraNameList:[["epoch","batchsize","transferLearning","learningrate","imagesize"],["epoch","batch_size","crop_size","learning_rate_decay_factor","learning_power"],[],["epoch","batchsize","learningrate","imagesize"],["epoch","batch_size","crop_size","learning_rate_decay_factor","learning_power"]],paraValueList:[["100","2","none","0.001","416"],["100","2","321","0.1","0.9"],[],["100","2","0.01","none"],["100","2","321","0.1","0.9"]],showParaNameList:[],showParaValueList:[],transferLearningList:["none","darknet","no_output","fine_tune","frozen"],transferLearningValue:"none",initialPara:{inputData:{name:[],uuid:[],algorithmType:[]},outpath:[]},currentAlgorithm:0,selectPara:{para:this.selectedstatus},taskPara:{algo_id:0,args:"string",cost_time:"0",dataset_id:"string",dataset_name:"string",dataset_label_type:"number",descr:"string",name:"string",status:"0",user_id:0,uuid:"string"},queryInfo:{user_id:I["a"].getters.userid,pagenum:1,pagesize:10,query:""},commonPara:{trainjob_id:0},showPara:{trainjob_id:0},timer:null,timerLog:null,totalData:0,Mockprocess:0,isSearchingFlag:!1}},methods:{pathChange:function(t){this.editbutton=!0,this.showParaNameList=[],this.showParaValueList=[],this.paraNameList=[],this.paraValueList=[];var a=this.initialPara.inputData.uuid[this.taskForm.dataset_index];0==this.initialPara.inputData.algorithmType[t]&&(this.showParaNameList.push("epoch"),this.showParaNameList.push("batchsize"),this.showParaNameList.push("transferLearning"),this.showParaNameList.push("learningrate"),this.showParaNameList.push("imagesize"),this.showParaValueList.push("100"),this.showParaValueList.push("2"),this.showParaValueList.push("none"),this.showParaValueList.push("0.001"),this.showParaValueList.push("416")),3==this.initialPara.inputData.algorithmType[t]&&(this.showParaNameList.push("epoch"),this.showParaNameList.push("batchsize"),this.showParaNameList.push("learningrate"),this.showParaNameList.push("imagesize"),this.showParaValueList.push("100"),this.showParaValueList.push("2"),this.showParaValueList.push("0.01"),this.showParaValueList.push("none")),1!=this.initialPara.inputData.algorithmType[t]&&4!=this.initialPara.inputData.algorithmType[t]||(this.showParaNameList.push("epoch"),this.showParaNameList.push("batch_size"),this.showParaNameList.push("crop_size"),this.showParaNameList.push("learning_rate_decay_factor"),this.showParaNameList.push("learning_power"),this.showParaValueList.push("100"),this.showParaValueList.push("2"),this.showParaValueList.push("321"),this.showParaValueList.push("0.1"),this.showParaValueList.push("0.9")),console.log("this.showParaNameList",this.showParaNameList,"this.showParaValueList",this.showParaValueList),this.paraNameList=JSON.parse(JSON.stringify(this.showParaNameList)),this.paraValueList=JSON.parse(JSON.stringify(this.showParaValueList)),console.log("this.paraNameList",this.paraNameList,"this.paraValueList",this.paraValueList),this.taskForm.data=a,console.log("data",a),this.imageOssPath="data/dataset/"+a+"/input/source/",this.textOssPath="data/dataset/"+a+"/input/annotation/",this.modelOssPath="data/dataset/"+a+"/output/ckpt/",this.cachange(this.useAlgorithm)},closeparadialog:function(){this.parameterdialogVisible=!1},editOneoption:function(){this.parameterdialogVisible=!0},findInList:function(t){return-1!=this.showParaNameList.indexOf(t)},changePara:function(t){console.log("item",t),-1==this.showParaNameList.indexOf(t)?(this.showParaNameList.push(t),this.showParaValueList.push(this.paraValueList[this.paraNameList.indexOf(t)])):this.deleteOneoption(this.showParaNameList.indexOf(t))},deleteOneoption:function(t){console.log("index",t),this.showParaNameList.splice(t,1),this.showParaValueList.splice(t,1),console.log("showParaNameList",this.showParaNameList.length,"paraNameList",this.paraNameList.length)},addOneoption:function(){},cachange:function(t){console.log("testdata",t),this.currentAlgorithm=t},clearForm:function(){this.$refs["taskForm"].resetFields()},resetSearch:function(){this.fetchData(),this.isSearchingFlag=!1},searchTask:function(){var t=this;if(""!=this.queryInfo.query){this.isSearchingFlag=!0;var a={user_id:I["a"].getters.userid,curr:this.queryInfo.pagenum,size:this.queryInfo.pagesize,tj_name:this.queryInfo.query};F(a).then((function(a){console.log(a.data),t.queryInfo.pagenum=a.data.items.current,t.queryInfo.pagesize=a.data.items.size,t.totalData=a.data.items.total,t.tableData=a.data.items.records}))}else this.isSearchingFlag=!1},searchStatusTask:function(){var t=this;if(this.selectPara.para=this.selectedstatus,5==this.selectedstatus)this.resetSearch();else{this.isSearchingFlag=!0;var a={user_id:I["a"].getters.userid,curr:this.queryInfo.pagenum,size:this.queryInfo.pagesize,tj_status:this.selectPara.para};F(a).then((function(a){console.log("search",a.data),t.queryInfo.pagenum=a.data.items.current,t.queryInfo.pagesize=a.data.items.size,t.totalData=a.data.items.total,t.tableData=a.data.items.records}))}},createbtn:function(){var t=this;this.dialogFormVisible=!0,this.taskForm.uuid=this.generateUUID(),this.taskForm.user_id=I["a"].getters.userid,this.taskForm.name="train-"+this.taskForm.uuid.slice(0,4),this.useAlgorithm="",this.taskForm.data="",this.taskForm.outpath="",this.taskForm.description="",this.taskForm.paras=[],console.log(" store.getters",I["a"].getters),console.log(" taskForm",this.taskForm);var a={id:I["a"].getters.userid};console.log("preprepreprepreprepreprepre"),q(a).then((function(a){console.log("getAcceptData",a),t.initialPara.inputData.name=[],t.initialPara.inputData.uuid=[],t.initialPara.inputData.algorithmType=[];for(var e=0;e<a.data.items.length;e++)t.initialPara.inputData.name.push(a.data.items[e].name),t.initialPara.inputData.uuid.push(a.data.items[e].uuid),t.initialPara.inputData.algorithmType.push(a.data.items[e].label_type);console.log("this.initialPara",t.initialPara)})),this.showParaNameList=[],this.showParaValueList=[],this.paraNameList=[],this.paraValueList=[],this.editbutton=!1},handleConfig:function(t,a){console.log("row",a)},handleShowlog:function(t,a){console.log("row",a.uuid),this.commonPara.trainjob_id=a.uuid,this.logdialogVisible=!0,clearInterval(this.timerLog),this.timerLog=null,this.setTimerLog(this.commonPara.trainjob_id)},handleStart:function(t,a){var e=this;this.commonPara.trainjob_id=a.uuid,D(this.commonPara).then((function(t){console.log(e.commonPara),console.log(t),e.fetchData()}))},handleDelete:function(t,a){var e=this;this.$confirm("此操作将永久删除该训练记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.commonPara.trainjob_id=a.uuid,V(e.commonPara).then((function(t){console.log(t),e.fetchData(),2e4===t.code&&e.$message({type:"success",message:"删除成功!"})}))}))},handleStop:function(t,a){var e=this;this.$confirm("此操作将终止该任务训练, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.commonPara.trainjob_id=a.uuid,O(e.commonPara).then((function(t){console.log(t),e.fetchData()})),e.$message({type:"success",message:"终止成功!"})}))},handleShow:function(t,a){var e=this;console.log(this.showPara,t,a),this.picVisible=!0,this.showPara.trainjob_id=a.trainjob_id;z(this.tmp).then((function(t){console.log(t),e.drawData.first.epoch=t.data.epoch,e.drawData.second.epoch=t.data.epoch,e.drawData.first.trainLoss=t.data.trainLoss,e.drawData.first.valLoss=t.data.valLoss,e.drawData.second.valAccuaccy=t.data.valAccuaccy}))},closeShowLog:function(){this.logdialogVisible=!1,clearInterval(this.timerLog),this.timerLog=null},formatDate:function(t){var a=t[0],e=t[1],i=t[2],s=t[3],o=t[4],n=t[5];return s.toString().length<2&&(s="0"+s),null==o?o="00":o.toString().length<2&&(o="0"+o),null==n?n="00":n.toString().length<2&&(n="0"+n)," "+a+"-"+e+"-"+i+" "+s+":"+o+":"+n},fetchData:function(){var t=this,a={user_id:I["a"].getters.userid,curr:this.queryInfo.pagenum,size:this.queryInfo.pagesize};(void 0)(a).then((function(a){console.log("fetchData",a),t.queryInfo.pagenum=a.data.items.current,t.queryInfo.pagesize=a.data.items.size,t.totalData=a.data.items.total,t.tableData=a.data.items.records}))},create:function(t){var a=this;this.$refs[t].validate((function(t){if(console.log("vaild",t),!t)return console.log("创建失败!!"),callback();alert("创建成功!"),a.dialogFormVisible=!1})),this.editbutton=!1;JSON.parse(JSON.stringify(this.paraNameList)),JSON.parse(JSON.stringify(this.paraValueList));console.log(this.showParaNameList,"das",this.showParaValueList);for(var e=[],i=[],s=0;s<this.paraNameList.length;s++)e.push(this.paraNameList[s]),-1==this.showParaNameList.indexOf(this.paraNameList[s])?i.push(this.paraValueList[s]):"transferLearning"==this.paraNameList[s]?i.push(this.transferLearningValue):i.push(this.showParaValueList[this.showParaNameList.indexOf(this.paraNameList[s])]);console.log("transParaNameList",e,"transParaValueList",i),this.taskForm.paras.push(e),this.taskForm.paras.push(i),this.taskPara.algo_id=this.useAlgorithm,this.taskPara.args=JSON.stringify(this.taskForm.paras),this.taskPara.dataset_id=this.initialPara.inputData.uuid[this.taskForm.dataset_index],this.taskPara.dataset_name=this.initialPara.inputData.name[this.taskForm.dataset_index],this.taskPara.dataset_label_type=this.initialPara.inputData.algorithmType[this.taskForm.dataset_index],this.taskPara.descr=this.taskForm.description,this.taskPara.name=this.taskForm.name,this.taskPara.user_id=JSON.stringify(this.taskForm.user_id),this.taskPara.source_oss_path=this.imageOssPath,this.taskPara.annotation_oss_path=this.textOssPath,this.taskPara.model_oss_path=this.modelOssPath,console.log("this.taskPara",this.taskPara),T(this.taskPara).then((function(t){console.log(t.data),a.fetchData()})),this.dialogFormVisible=!1,this.$refs[t].resetFields()},cancelbtn:function(t){this.dialogFormVisible=!1,this.editbutton=!1,this.$refs[t].resetFields()},handleSizeChange:function(t){this.queryInfo.pagesize=t,""!=this.queryInfo.query?console.log(this.queryInfo.query):"5"!=this.selectedstatus?this.searchStatusTask():this.fetchData()},handleCurrentChange:function(t){this.queryInfo.pagenum=t,""!=this.queryInfo.query?console.log(this.queryInfo.query):"5"!=this.selectedstatus?this.searchStatusTask():this.fetchData()},setTimer:function(){var t=this;null==this.timer&&(this.timer=setInterval((function(){console.log("开始定时...每过一秒执行一次,刷新页面"),t.isSearchingFlag||t.fetchData()}),1e3))},setTimerLog:function(t){var a=this;console.log("this.timerLog",this.timerLog,"train_id",t),this.logText="";var e={trainjob_id:t};null==this.timerLog&&(console.log("timerLognull111"),this.timerLog=setInterval((function(){console.log("timerLognull222"),N(e).then((function(t){console.log("res",t),a.logText=t.data.content;var e=document.getElementById("textarea_id");e.scrollTop=e.scrollHeight}))}),1e3))},generateUUID:function(){var t=(new Date).getTime();window.performance&&"function"===typeof window.performance.now&&(t+=performance.now());var a="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(a){var e=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==a?e:3&e|8).toString(16)}));return a}},mounted:function(){window.searchTask=this.searchTask,document.onkeydown=C,this.fetchData(),this.setTimer()},created:function(){1==I["a"].getters.register&&this.$router.push("/dashboard")},destroyed:function(){document.onkeydown=void 0,clearInterval(this.timer),this.timer=null}},A=j,$=(e("b965"),Object(u["a"])(A,i,s,!1,null,"39f1104e",null));a["default"]=$.exports},a434:function(t,a,e){"use strict";var i=e("23e7"),s=e("23cb"),o=e("a691"),n=e("50c4"),r=e("7b0b"),l=e("65f0"),c=e("8418"),h=e("1dde"),u=e("ae40"),d=h("splice"),p=u("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,g=Math.min,f=9007199254740991,b="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!d||!p},{splice:function(t,a){var e,i,h,u,d,p,y=r(this),w=n(y.length),_=s(t,w),x=arguments.length;if(0===x?e=i=0:1===x?(e=0,i=w-_):(e=x-2,i=g(m(o(a),0),w-_)),w+e-i>f)throw TypeError(b);for(h=l(y,i),u=0;u<i;u++)d=_+u,d in y&&c(h,u,y[d]);if(h.length=i,e<i){for(u=_;u<w-i;u++)d=u+i,p=u+e,d in y?y[p]=y[d]:delete y[p];for(u=w;u>w-i+e;u--)delete y[u-1]}else if(e>i)for(u=w-i;u>_;u--)d=u+i-1,p=u+e-1,d in y?y[p]=y[d]:delete y[p];for(u=0;u<e;u++)y[u+_]=arguments[u+2];return y.length=w-i+e,h}})},b965:function(t,a,e){"use strict";e("5a0d")},ed08:function(t,a,e){"use strict";e.d(a,"a",(function(){return i}));e("53ca"),e("ac1f"),e("5319"),e("4d63"),e("25f0"),e("d3b7"),e("4d90"),e("a15b"),e("d81d"),e("b64b"),e("1276"),e("159b"),e("fb6a"),e("a630"),e("3ca3"),e("6062"),e("ddb0"),e("466d");function i(t,a,e){var i,s,o,n,r,l=function l(){var c=+new Date-n;c<a&&c>0?i=setTimeout(l,a-c):(i=null,e||(r=t.apply(o,s),i||(o=s=null)))};return function(){for(var s=arguments.length,c=new Array(s),h=0;h<s;h++)c[h]=arguments[h];o=this,n=+new Date;var u=e&&!i;return i||(i=setTimeout(l,a)),u&&(r=t.apply(o,c),o=c=null),r}}}}]);