(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37ad94c1"],{"57c2":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("h3",[t._v("边缘端预测")]),i("div",{staticStyle:{"margin-top":"15px",width:"450px"}},[i("el-input",{staticClass:"input-with-select",attrs:{placeholder:"access_token"},model:{value:t.input3,callback:function(e){t.input3=e},expression:"input3"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-key"},on:{click:t.getAccess0},slot:"append"},[t._v("点击获取")])],1)],1),i("el-tooltip",{staticStyle:{"margin-top":"15px"},attrs:{placement:"top"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v("1. 点击上方按钮获取access_key"),i("br"),i("br"),t._v(" 3. post请求/predict/edge 接口，字段如下："),i("br"),i("br"),t._v(" String access_key, //key用于验证身份"),i("br"),t._v(" String file_base64, //base64编码的图片字符串"),i("br"),t._v(" String model_uuid //模型唯一标识号（见模型管理页面）"),i("br"),i("br"),t._v(" 4. 接口返回内容字段如下："),i("br"),i("br"),t._v(" String predict_info //标注信息"),i("br"),t._v(" String encode_predict_pic, //base64编码的预测结果图片字符串"),i("br"),i("br")]),i("el-button",[t._v("接口使用方法")])],1),i("el-divider"),i("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:t.uploadLoading,expression:"uploadLoading"}],ref:"upload",staticClass:"upload",staticStyle:{width:"400px"},attrs:{action:"string","file-list":t.fileList,"auto-upload":!1,"http-request":t.uplFile,"on-change":t.handleChange,"on-preview":t.handlePreview,"on-remove":t.handleRemove,multiple:"multiple","element-loading-text":"上传中","element-loading-spinner":"el-icon-loading"}},[i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},on:{click:t.delFile},slot:"trigger"},[t._v("选取文件")]),t._v(" "),i("p",[t._v("默认yolo_tensor模型唯一标识：3e1666e5f1664612bfc9fc3d0a49ba74")])],1),i("el-input",{staticStyle:{"margin-top":"15px",width:"400px"},attrs:{placeholder:"请输入要使用模型的唯一标识",clearable:""},model:{value:t.model_uuid,callback:function(e){t.model_uuid=e},expression:"model_uuid"}}),i("p",[t._v("自动转换图片为base64编码并调用预测接口")]),i("div",{staticClass:"dialog-footer",staticStyle:{"margin-top":"15px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.uploadObjectNull}},[t._v("清空")]),i("el-button",{attrs:{type:"primary"},on:{click:t.uploadObject}},[t._v("开始预测")])],1),i("div",{directives:[{name:"show",rawName:"v-show",value:t.is_predicting,expression:"is_predicting"}],staticStyle:{"margin-top":"15px",width:"400px"}},[t._v(" 预测中... ")]),i("el-input",{staticStyle:{width:"800px","margin-top":"15px"},attrs:{type:"textarea",autosize:{minRows:20,maxRows:20},placeholder:"接口返回内容"},model:{value:t.textarea1,callback:function(e){t.textarea1=e},expression:"textarea1"}}),i("div",{staticClass:"demo-image__placeholder"},[i("div",{staticClass:"block"},[i("span",{staticClass:"demonstration"},[t._v("预测结果")]),i("el-image",{staticStyle:{"max-height":"1200px","max-width":"1200px"},attrs:{src:"data:image/png;base64,"+t.predict_pic}},[i("div",{attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(" 加载中"),i("span",{staticClass:"dot"},[t._v("...")])])])],1)])],1)},a=[],r=(i("d3b7"),i("b0c0"),i("c657")),o=(i("4360"),{data:function(){return{fileList:[],model_uuid:"",uploadLoading:!1,textarea1:"",input3:"",is_predicting:!1,predict_pic:""}},methods:{uploadObjectNull:function(){this.fileList=[],this.model_uuid="",this.textarea1=""},uploadObject:function(){var t=this;""==this.model_uuid&&this.$message.error("请输入模型唯一标识"),0==this.fileList.length&&this.$message.error("请选择图片文件"),this.is_predicting=!0;var e=new FormData;e.append("file",this.fileList[0].raw),e.append("model_uuid",this.model_uuid),console.log(this.fileList),Object(r["l"])(e).then((function(e){if(2e4==e.code){t.fileList=[];var i=JSON.parse(e.data.content);console.log(i),t.textarea1='{\n  "encode_info": "'+i.predict_info+'", \n  "encode_predict_pic": "'+i.encode_predict_pic+'" \n }',t.is_predicting=!1,t.predict_pic=i.encode_predict_pic}else t.$message.error("请求失败")})).finally((function(){t.is_predicting=!1}))},delFile:function(){this.fileList=[]},handleChange:function(t,e){this.fileList=e,this.uploadFilePostfix=t.name.substring(t.name.indexOf("."))},uplFile:function(t){this.formData.append("file",t.file)},handleRemove:function(t,e){console.log(t,e)},handlePreview:function(t){console.log(t)},getAccess0:function(){var t=this;Object(r["b"])().then((function(e){2e4==e.code?(console.log(e),t.input3=e.data.Accesskey):t.$message.error("请求失败")}))}}}),c=o,l=(i("613a"),i("2877")),s=Object(l["a"])(c,n,a,!1,null,"a1b49d82",null);e["default"]=s.exports},"613a":function(t,e,i){"use strict";i("d2f0")},c657:function(t,e,i){"use strict";i.d(e,"j",(function(){return a})),i.d(e,"a",(function(){return r})),i.d(e,"i",(function(){return o})),i.d(e,"h",(function(){return c})),i.d(e,"g",(function(){return l})),i.d(e,"k",(function(){return s})),i.d(e,"e",(function(){return d})),i.d(e,"c",(function(){return u})),i.d(e,"f",(function(){return p})),i.d(e,"l",(function(){return f})),i.d(e,"b",(function(){return m}));var n=i("b775");function a(t){return Object(n["a"])({url:"/8084/predict/start",method:"post",params:t})}function r(t){return Object(n["a"])({url:"/8084/predict",method:"delete",params:t})}function o(t){return Object(n["a"])({url:"/8084/predict/log?trainjob_id="+t,method:"post",params:t})}function c(t){return Object(n["a"])({params:t,url:"/8084/predict/search",method:"get"})}function l(t){return Object(n["a"])({url:"/8084/8084/newtrain/getVisualData",method:"get",params:t})}function s(t){return Object(n["a"])({url:"/8084/predict",method:"post",data:t})}function d(t){return Object(n["a"])({params:t,url:"/8084/train/search",method:"get"})}function u(t){return Object(n["a"])({params:t,url:"/8081/model/nopage",method:"get"})}function p(t){return Object(n["a"])({url:"/8081/model/getTargetDatasets",method:"get",params:t})}function f(t){return Object(n["a"])({url:"/8084/predict/pic0",method:"post",data:t,headers:{"Content-Type":"multipart/form-data;charset=utf-8"}})}function m(){return Object(n["a"])({url:"/8084/predict/getAccess",method:"get"})}},d2f0:function(t,e,i){}}]);