(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e6bfa2b"],{1:function(t,e){},2:function(t,e){},3:function(t,e){},"77c4":function(t,e,i){"use strict";i.d(e,"d",(function(){return a})),i.d(e,"e",(function(){return r})),i.d(e,"c",(function(){return s})),i.d(e,"b",(function(){return o})),i.d(e,"a",(function(){return l})),i.d(e,"g",(function(){return c})),i.d(e,"h",(function(){return h})),i.d(e,"i",(function(){return g})),i.d(e,"f",(function(){return u}));var n=i("b775");function a(t){return Object(n["a"])({url:"/8085/userAudit/getAudits",method:"get",params:t})}function r(t){return Object(n["a"])({url:"/8085/userAudit/getAuditData",method:"get",params:t})}function s(t){return Object(n["a"])({url:"/8085/userAudit/batchSave",method:"put",params:t})}function o(t){return Object(n["a"])({url:"/8085/userAudit/batchReject",method:"put",params:t})}function l(t){return Object(n["a"])({url:"/8085/userAudit/batchReSet",method:"put",params:t})}function c(t){return Object(n["a"])({url:"/8085/userAudit/isAudit",method:"put",params:t})}function h(t){return Object(n["a"])({url:"/8085/userAudit/isReSet",method:"put",params:t})}function g(t){return Object(n["a"])({url:"/8085/userAudit/isReject",method:"put",params:t})}function u(t){return Object(n["a"])({url:"/8085/userAudit/getAudit",method:"get",params:t})}},"7e1e":function(t,e,i){"use strict";i.d(e,"f",(function(){return a})),i.d(e,"c",(function(){return r})),i.d(e,"e",(function(){return s})),i.d(e,"h",(function(){return o})),i.d(e,"i",(function(){return l})),i.d(e,"a",(function(){return c})),i.d(e,"m",(function(){return h})),i.d(e,"k",(function(){return g})),i.d(e,"b",(function(){return u})),i.d(e,"l",(function(){return d})),i.d(e,"j",(function(){return f})),i.d(e,"d",(function(){return b}));var n=i("b775");function a(t){return Object(n["a"])({url:"/8085/data/getAssignedData",method:"get",params:t})}function r(t){return Object(n["a"])({url:"/8085/data/create",method:"post",params:t})}function s(t){return Object(n["a"])({url:"/8089/dataset/delete",method:"delete",params:t})}function o(t){return Object(n["a"])({url:"/8085/userlabel/getAll",method:"get",params:t})}function l(t){return Object(n["a"])({url:"/8085/userlabel/getLabel",method:"get",params:t})}function c(t){return Object(n["a"])({url:"/8085/userlabel/assignLabel",method:"post",params:t})}function h(t){return Object(n["a"])({url:"/8085/label/fresh",method:"put",params:t})}function g(t){return Object(n["a"])({url:"/8085/tag/get",method:"get",params:t})}function u(t){return Object(n["a"])({url:"/8085/userlabel/assignNewData",method:"post",params:t})}function d(t){return Object(n["a"])({url:"/8085/userlabel/reAssign",method:"post",params:t})}function f(t){return Object(n["a"])({url:"/8085/userlabel/getNewLabel",method:"get",params:t})}function b(t){return Object(n["a"])({url:"/8085/teamdataset/delTeam",method:"delete",params:t})}},a15b:function(t,e,i){"use strict";var n=i("23e7"),a=i("44ad"),r=i("fc6a"),s=i("a640"),o=[].join,l=a!=Object,c=s("join",",");n({target:"Array",proto:!0,forced:l||!c},{join:function(t){return o.call(r(this),void 0===t?",":t)}})},a708:function(t,e,i){},c708:function(t,e,i){"use strict";i("a708")},d28d:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return r})),i.d(e,"c",(function(){return s}));var n=i("b775");function a(t){return Object(n["a"])({url:"/8082/dataset/tag",method:"get",params:t})}function r(t){return Object(n["a"])({url:"/8085/tag/saveTags",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/8085/tag/updateTags",method:"put",data:t})}},e280:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"polygon-body",staticStyle:{width:"100%"}},[i("div",[i("div",{style:{marginLeft:(this.divWidth-250)/2+"px",display:"block"}},[i("el-button-group",{staticStyle:{display:"inline-block"}},[i("el-button",{style:{width:"80px"},attrs:{icon:"el-icon-zoom-in"},on:{click:t.fangda}}),i("el-button",{style:{width:"80px"},attrs:{icon:"el-icon-zoom-out"},on:{click:t.suoxiao}}),i("el-button",{style:{width:"80px"},attrs:{icon:"el-icon-refresh"},on:{click:t.huanyuan}})],1)],1)]),i("div",{style:{display:"flex"}},[i("div",{ref:"outdiv",style:{maxWidth:"1000px",maxHeight:"1000px"},attrs:{id:"leftdiv"}},[i("div",{staticClass:"polygon",style:{},on:{mouseenter:t.fangdasuoxiaochange1,mouseleave:t.fangdasuoxiaochange2,mousewheel:function(t){t.preventDefault()}}},[i("canvas",{staticClass:"canvas",attrs:{id:"label-canvas"}})]),i("div",{staticStyle:{display:"inline-block"},attrs:{id:"remarkinfodiv"}},[i("div",[i("p",[t._v("驳回备注："+t._s(t.auditremakeinfo))])]),i("div",[i("p",[t._v("验收备注："+t._s(t.acceptremakeinfo))])])])]),i("div",{staticClass:"el-divider el-divider--vertical"}),i("div",{attrs:{id:"rightdiv"}},[i("el-divider"),i("div",{ref:"infodiv",staticClass:"infopolygon",style:t.setheightInfo},t._l(t.allobjArray,(function(e,n){return i("div",{key:n,staticStyle:{"margin-right":"20px"}},[i("div",{style:{width:"400px",height:"160px",marginTop:"10px",border:t.b_i===n?"3px solid #ff0000":"0px solid #ff0000",background:e.color},on:{mousedown:function(i){return t.handelClick(e,n)}}},[i("div",{staticStyle:{width:"300px","margin-top":"10px",display:"inline-block"}},[i("p",{style:{marginLeft:"30px",marginTop:"10px",width:"300px",fontSize:"20px",display:"inline-block"}},[t._v(" 矩形 "+t._s(e.info)+" ")])])])])})),0)],1)])])},a=[],r=i("53ca"),s=(i("a9e3"),i("159b"),i("b0c0"),i("7a94")),o={props:{fatherimagesrc:String,imageindex:Number,premarktype:{type:Array,default:function(){return[]}},auditremakeinfo:{type:String,default:""},acceptremakeinfo:{type:String,default:""},lastlabelArry:{type:Object,default:function(){}},canvaswidth:{type:Number,default:600},canvasheight:{type:Number,default:600}},data:function(){return{divWidth:1e3,divHeight:750,mountedFlag:!0,setheightTag:{marginTop:"20px",marginLeft:"20px",height:""},setheightInfo:{marginLeft:"20px",height:""},radio:"rectanglemark",markstyle:!0,dialogVisible:!1,dialogleft:0,dialogtop:0,markcolor2:"rgba(0,128,128,0.5)",markinfo2:null,mousePointerEvent:null,b_i:"",allowchangebi:!0,lockradio:!1,temitem:null,fangdasuoxiaoFlag:!1,buttonindex:-1,input:null,temproof:null,rectangle:null,panning:!1,zoom:1,islabeling:!1,allobjArray:[],temtwopoint:[],generateline:[],temlineobj:null,imagechangebtntext:"修改图形",isimagechange:!1,imagewidth:null,imageheight:null,scalewidth:null,scaleheight:null,distanceDelta:0,rectanglePoints:[],realRectanglePoints:[],temRectangle:[],rectangleArray:[],rectangleinfoArray:[],realrectangleinfoArray:[],fabricObj:null,fabricimageObj:null,canvas:null,Point:{},markcolor:"rgba(0,128,128,0.5)",markinfo:null,buttonmouseoveflag:!1}},computed:{imagesrc:function(){return this.fatherimagesrc}},destroyed:function(){window.removeEventListener("resize",this.GetWindowInfo),window.removeEventListener("mousewheel",this.checkFangdasSuoxiao)},mounted:function(){var t=this;window.addEventListener("resize",this.GetWindowInfo),window.addEventListener("mousewheel",this.checkFangdasSuoxiao,!0),this.GetWindowInfo(),this.mountedFlag=!1,this.$nextTick((function(){setTimeout((function(){t.fabricObj=new s["fabric"].Canvas("label-canvas"),t.fabricObj.selection=!1,t.fabricEvent(),t.createBackgroundImage()}),500),setTimeout((function(){t.updatelastdata(),console.log("wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww",t.fabricObj.width),t.huanyuan()}),520),setTimeout((function(){t.GetWindowInfo()}),550)}))},watch:{imagesrc:function(){var t=this;console.log("watch!!!!!!!!"),this.buttonindex=-1,this.createBackgroundImage(),setTimeout((function(){t.rectangleArray.forEach((function(e){t.fabricObj.remove(e)})),t.clearinfo(),t.clearobj(),t.markinfo=null,t.isimagechange&&t.Edit(),t.updatelastdata(),t.huanyuan(),t.buttonindex=-1}),20)},radio:function(){this.start()}},methods:{handelClick:function(t,e){this.allowchangebi&&(this.b_i!=e?(this.b_i=e,this.getBorder(t)):(this.deleteBorder(t),this.b_i=-1)),console.log("hahaha"+t.type)},getBorder:function(t){if(this.temitem=t,"rectangle"==t.type){var e=this.rectangleArray.indexOf(t);console.log("index2",e);var i=this.fabricObj.getObjects()[this.fabricObj._objects.indexOf(this.rectangleArray[e])];console.log(e,i),i.hasBorders=!0,i.hasControls=!1,i.selectable=!1,i.set({lockMovementX:!0,lockMovementY:!0}),this.fabricObj.setActiveObject(i),this.fabricObj.renderAll()}},deleteBorder:function(t){if(this.temitem=null,"rectangle"==t.type){var e=this.rectangleArray.indexOf(t),i=this.fabricObj.getObjects()[this.fabricObj._objects.indexOf(this.rectangleArray[e])];console.log(e,i),i.hasBorders=!1,i.hasControls=!0,i.selectable=!1,i.set({lockMovementX:!1,lockMovementY:!1}),this.fabricObj.discardActiveObject(i),this.fabricObj.renderAll()}},cancelbi:function(){this.b_i=-1},fangdasuoxiaochange1:function(){console.log("enter!!!!!"),this.fangdasuoxiaoFlag=!0},fangdasuoxiaochange2:function(){console.log("leave!!!!!"),this.fangdasuoxiaoFlag=!1},checkFangdasSuoxiao:function(t){var e=t.deltaY>0?"down":"up";this.fangdasuoxiaoFlag&&("up"==e?this.fangda():this.suoxiao())},GetWindowInfo:function(){window.innerWidth>1650?this.divWidth=1e3:window.innerWidth>800?this.divWidth=1e3-(1650-window.innerWidth):this.divWidth=500,window.innerHeight>930?this.divHeight=750:window.innerHeight>450?this.divHeight=750-(930-window.innerHeight):this.divHeight=375,this.mountedFlag||(this.fabricObj.setWidth(this.divWidth),this.fabricObj.setHeight(this.divHeight),this.setheightTag.height=.25*this.divHeight+"px",this.setheightInfo.height=.75*this.divHeight+"px",console.log("asduisafhiasfb",this.divHeight))},clearobj:function(){var t=this;this.islabeling&&(this.islabeling=!1),this.temRectangle.forEach((function(e){return t.fabricObj.remove(e)})),this.rectanglePoints=[],this.realRectanglePoints=[],this.temRectangle=[],this.b_i=-1},clearinfo:function(){this.allobjArray=[],this.rectangleArray=[],this.rectangleinfoArray=[],this.realrectangleinfoArray=[]},fangda:function(){var t=new s["fabric"].Point(this.divWidth/2,this.divHeight/2);this.zoom<4.99&&(this.zoom+=.1),this.fabricObj.zoomToPoint(t,this.zoom)},suoxiao:function(){var t=new s["fabric"].Point(this.divWidth/2,this.divHeight/2);this.zoom>.2&&(this.zoom-=.1),this.zoom>.1&&this.fabricObj.zoomToPoint(t,this.zoom)},huanyuan:function(){this.zoom=1,this.fabricObj.setZoom(1);var t=new s["fabric"].Point(0,0);this.fabricObj.absolutePan(t),this.fabricObj.relativePan(this.distanceDelta)},updatelastdata:function(){if(console.log("image select lastlabelArry",this.lastlabelArry),console.log("remarkinfo",this.auditremakeinfo,this.acceptremakeinfo),this.b_i=-1,console.log("img11111111111111111",this.scalewidth,this.scaleheight),void 0!=this.lastlabelArry.rectangle&&null!=this.lastlabelArry.rectangle)for(var t=0;t<this.lastlabelArry.rectangle.length;t++){console.log("rectangle1",this.lastlabelArry.rectangle[t]);var e={},i={};e["x"]=this.lastlabelArry.rectangle[t].x1*this.scalewidth,e["y"]=this.lastlabelArry.rectangle[t].y1*this.scaleheight,i["x"]=this.lastlabelArry.rectangle[t].x1,i["y"]=this.lastlabelArry.rectangle[t].y1,this.rectanglePoints.push(e),this.realRectanglePoints.push(i);var n={},a={};n["x"]=this.lastlabelArry.rectangle[t].x2*this.scalewidth,n["y"]=this.lastlabelArry.rectangle[t].y2*this.scaleheight,a["x"]=this.lastlabelArry.rectangle[t].x2,a["y"]=this.lastlabelArry.rectangle[t].y2,this.rectanglePoints.push(n),this.realRectanglePoints.push(a),this.markinfo=this.lastlabelArry.rectangle[t].info,this.findcolor(this.lastlabelArry.rectangle[t].info),this.makeRectangle(),this.rectangleArray.push(this.rectangle),this.allobjArray.push(this.rectangle),this.rectangleinfoArray.push({x1:this.rectanglePoints[0].x,y1:this.rectanglePoints[0].y,x2:this.rectanglePoints[1].x,y2:this.rectanglePoints[1].y,info:this.markinfo}),this.realrectangleinfoArray.push({x1:this.realRectanglePoints[0].x,y1:this.realRectanglePoints[0].y,x2:this.realRectanglePoints[1].x,y2:this.realRectanglePoints[1].y,info:this.markinfo}),this.fabricObj.add(this.rectangle),this.rectanglePoints=[],this.realRectanglePoints=[],this.rectangle=null}this.fabricObj.renderAll(),this.fabricObj.hoverCursor="default"},createBackgroundImage:function(){var t=this;console.log(this.imagesrc),void 0!==this.imagesrc&&null!==this.imagesrc&&(this.fabricimageObj=new s["fabric"].Image.fromURL(this.imagesrc,(function(e){if(t.imagewidth=e.width,t.imageheight=e.height,t.scalewidth=1,t.scaleheight=1,e.width<.8*t.divWidth&&e.height<.8*t.divHeight)while(t.imagewidth<.8*t.divWidth&&t.imageheight<.8*t.divHeight)t.imagewidth*=1.1,t.imageheight*=1.1,t.scalewidth*=1.1,t.scaleheight*=1.1;if(e.width>t.divWidth||e.height>t.divHeight)while(t.imagewidth>t.divWidth||t.imageheight>t.divHeight)t.imagewidth/=1.1,t.imageheight/=1.1,t.scalewidth/=1.1,t.scaleheight/=1.1;t.distanceDelta=new s["fabric"].Point((t.divWidth-t.imagewidth)/2,(t.divHeight-t.imageheight)/2),t.fabricObj.setWidth(t.divWidth),t.fabricObj.setHeight(t.divHeight),console.log(e.width),console.log(e.height),console.log(t.imagewidth),console.log(t.imageheight),console.log(t.fabricObj.width),console.log(t.fabricObj.height),console.log(t.scalewidth),console.log(t.scaleheight),e.set({scaleX:t.scalewidth,scaleY:t.scaleheight,selectable:!0,hasControls:!1,left:0,top:0}),t.fabricObj.setBackgroundImage(e,t.fabricObj.renderAll.bind(t.fabricObj))})))},fabricEvent:function(){var t=this;this.fabricObj.on({"mouse:down":function(e){console.log("1111"),t.panning=!0},"mouse:move":function(e){if(t.panning&&e&&e.e){var i=new s["fabric"].Point(e.e.movementX,e.e.movementY);t.fabricObj.relativePan(i)}},"mouse:up":function(e){console.log("upupup"),t.panning=!1}})},makeRectangleObj:function(t){if(t.absolutePointer.x!=this.rectanglePoints[0].x||t.absolutePointer.y!=this.rectanglePoints[0].y){console.log("dasiogfu890asdguyqehn fbewjkb fwekjb wef e eq");var e={},i={};e["x"]=t.absolutePointer.x,e["y"]=t.absolutePointer.y,i["x"]=t.absolutePointer.x/this.scalewidth,i["y"]=t.absolutePointer.y/this.scaleheight,this.rectanglePoints.push(e),this.realRectanglePoints.push(i),console.log("rectanglePoints",this.rectanglePoints),console.log("realRectanglePoints",this.realRectanglePoints),this.makeRectangle(),console.log("rectanuuuuuuuuuuuuuuuuuuuuuuuuglePoints",this.rectanglePoints),console.log("realRectanuuuuuuuuuuuuuuuuuuuuuglePoints",this.realRectanglePoints),this.rectangleArray.push(this.rectangle),this.allobjArray.push(this.rectangle),this.rectangleinfoArray.push({x1:this.rectanglePoints[0].x,y1:this.rectanglePoints[0].y,x2:this.rectanglePoints[1].x,y2:this.rectanglePoints[1].y,info:this.markinfo}),this.realrectangleinfoArray.push({x1:this.realRectanglePoints[0].x,y1:this.realRectanglePoints[0].y,x2:this.realRectanglePoints[1].x,y2:this.realRectanglePoints[1].y,info:this.markinfo}),this.fabricObj.remove(this.temRectangle[0]),this.fabricObj.add(this.rectangle),this.fabricObj.renderAll(),this.rectanglePoints=[],this.realRectanglePoints=[],this.rectangle=null,this.temRectangle=[],console.log("rectangleArray",this.rectangleArray),console.log("rectangleinfoArray",this.rectangleinfoArray),console.log("realrectangleinfoArray",this.realrectangleinfoArray),console.log("temRectangle",this.temRectangle[0]),this.islabeling&&(this.islabeling=!1)}else console.log("click repeat!!!")},makeRectangle:function(){if(console.log("rectanglePointsinnnnn",this.rectanglePoints),this.rectanglePoints[0].x>this.rectanglePoints[1].x){var t=this.rectanglePoints[0].x;this.rectanglePoints[0].x=this.rectanglePoints[1].x,this.rectanglePoints[1].x=t}if(this.rectanglePoints[0].y>this.rectanglePoints[1].y){var e=this.rectanglePoints[0].y;this.rectanglePoints[0].y=this.rectanglePoints[1].y,this.rectanglePoints[1].y=e}if(this.realRectanglePoints[0].x>this.realRectanglePoints[1].x){var i=this.realRectanglePoints[0].x;this.realRectanglePoints[0].x=this.realRectanglePoints[1].x,this.realRectanglePoints[1].x=i}if(this.realRectanglePoints[0].y>this.realRectanglePoints[1].y){var n=this.realRectanglePoints[0].y;this.realRectanglePoints[0].y=this.realRectanglePoints[1].y,this.realRectanglePoints[1].y=n}var a=new s["fabric"].Rect({left:this.rectanglePoints[0].x,top:this.rectanglePoints[0].y,fill:this.markcolor,width:this.rectanglePoints[1].x-this.rectanglePoints[0].x,height:this.rectanglePoints[1].y-this.rectanglePoints[0].y,hasControls:!1,borderColor:"red",selectable:!1}),r=this;a.on("scaled",(function(){this.set({width:this.width*this.scaleX,height:this.height*this.scaleY,scaleX:1,scaleY:1}),console.log("suofangsuofang",this,r.rectangleinfoArray[r.rectangleArray.indexOf(this)],r.realrectangleinfoArray[r.rectangleArray.indexOf(this)]),r.rectangleinfoArray[r.rectangleArray.indexOf(this)].x1=this.left,r.rectangleinfoArray[r.rectangleArray.indexOf(this)].y1=this.top,r.rectangleinfoArray[r.rectangleArray.indexOf(this)].x2=this.left+this.width,r.rectangleinfoArray[r.rectangleArray.indexOf(this)].y1=this.top+this.height,r.realrectangleinfoArray[r.rectangleArray.indexOf(this)].x1=this.left/r.scalewidth,r.realrectangleinfoArray[r.rectangleArray.indexOf(this)].y1=this.top/r.scaleheight,r.realrectangleinfoArray[r.rectangleArray.indexOf(this)].x2=(this.left+this.width)/r.scalewidth,r.realrectangleinfoArray[r.rectangleArray.indexOf(this)].y2=(this.top+this.height)/r.scaleheight})),a.on("moved",(function(){console.log("yidong",this,r.rectangleinfoArray[r.rectangleArray.indexOf(this)],r.realrectangleinfoArray[r.rectangleArray.indexOf(this)]),r.rectangleinfoArray[r.rectangleArray.indexOf(this)].x1=this.left,r.rectangleinfoArray[r.rectangleArray.indexOf(this)].y1=this.top,r.rectangleinfoArray[r.rectangleArray.indexOf(this)].x2=this.left+this.width,r.rectangleinfoArray[r.rectangleArray.indexOf(this)].y2=this.top+this.height,r.realrectangleinfoArray[r.rectangleArray.indexOf(this)].x1=this.left/r.scalewidth,r.realrectangleinfoArray[r.rectangleArray.indexOf(this)].y1=this.top/r.scaleheight,r.realrectangleinfoArray[r.rectangleArray.indexOf(this)].x2=(this.left+this.width)/r.scalewidth,r.realrectangleinfoArray[r.rectangleArray.indexOf(this)].y2=(this.top+this.height)/r.scaleheight})),a.setControlsVisibility({mtr:!1}),a.type="rectangle",a.color=this.markcolor,a.info=this.markinfo,this.rectangle=a,console.log("this.rectangle",this.rectangle)},findcolor:function(t){var e=this;this.premarktype.forEach((function(i){console.log("infind",t),i.name===t&&(console.log("find",i.color,Object(r["a"])(i.color)),e.markcolor=i.color)}))},findTopPaddingForRoof:function(t){for(var e=999999,i=0;i<this.roofPoints.length;i++)t[i].y<e&&(e=t[i].y);return Math.abs(e)},findLeftPaddingForRoof:function(t){for(var e=999999,i=0;i<this.roofPoints.length;i++)t[i].x<e&&(e=t[i].x);return Math.abs(e)}}},l=o,c=(i("c708"),i("2877")),h=Object(c["a"])(l,n,a,!1,null,"767330c0",null);e["a"]=h.exports}}]);